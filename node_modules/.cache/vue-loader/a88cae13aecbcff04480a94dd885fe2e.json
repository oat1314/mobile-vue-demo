{"remainingRequest":"F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\cube-ui\\src\\components\\image-preview\\image-preview.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\cube-ui\\src\\components\\image-preview\\image-preview.vue","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\思否\\20年spring boot+vue课程源码\\课程源码\\00-前端-后端代码-数据库\\xdclass_front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDdWJlUG9wdXAgZnJvbSAnLi4vcG9wdXAvcG9wdXAudnVlJwppbXBvcnQgQ3ViZVNsaWRlIGZyb20gJy4uL3NsaWRlL3NsaWRlLnZ1ZScKaW1wb3J0IEN1YmVTbGlkZUl0ZW0gZnJvbSAnLi4vc2xpZGUvc2xpZGUtaXRlbS52dWUnCmltcG9ydCBDdWJlU2Nyb2xsIGZyb20gJy4uL3Njcm9sbC9zY3JvbGwudnVlJwppbXBvcnQgdmlzaWJpbGl0eU1peGluIGZyb20gJy4uLy4uL2NvbW1vbi9taXhpbnMvdmlzaWJpbGl0eScKaW1wb3J0IHBvcHVwTWl4aW4gZnJvbSAnLi4vLi4vY29tbW9uL21peGlucy9wb3B1cCcKaW1wb3J0IHsgaXNBbmRyb2lkIH0gZnJvbSAnLi4vLi4vY29tbW9uL2hlbHBlcnMvZW52JwoKY29uc3QgQ09NUE9ORU5UX05BTUUgPSAnY3ViZS1pbWFnZS1wcmV2aWV3Jwpjb25zdCBFVkVOVF9DSEFOR0UgPSAnY2hhbmdlJwpjb25zdCBFVkVOVF9ISURFID0gJ2hpZGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogQ09NUE9ORU5UX05BTUUsCiAgbWl4aW5zOiBbdmlzaWJpbGl0eU1peGluLCBwb3B1cE1peGluXSwKICBwcm9wczogewogICAgaW5pdGlhbEluZGV4OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIGltZ3M6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICByZXR1cm4gW10KICAgICAgfQogICAgfSwKICAgIGxvb3A6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHNwZWVkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNDAwCiAgICB9LAogICAgcHJldmVudERlZmF1bHQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRQYWdlSW5kZXg6IHRoaXMuaW5pdGlhbEluZGV4LAogICAgICBvcHRpb25zOiB7CiAgICAgICAgb2JzZXJ2ZURPTTogZmFsc2UsCiAgICAgICAgYm91bmNlOiB7CiAgICAgICAgICBsZWZ0OiB0cnVlLAogICAgICAgICAgcmlnaHQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHVzZVRyYW5zaXRpb246ICFpc0FuZHJvaWQsCiAgICAgICAgcHJvYmVUeXBlOiAzLAogICAgICAgIHByZXZlbnREZWZhdWx0OiB0aGlzLnByZXZlbnREZWZhdWx0CiAgICAgIH0sCiAgICAgIHNjcm9sbE9wdGlvbnM6IHsKICAgICAgICBIV0NvbXBvc2l0aW5nOiBpc0FuZHJvaWQsCiAgICAgICAgb2JzZXJ2ZURPTTogZmFsc2UsCiAgICAgICAgem9vbTogdHJ1ZSwKICAgICAgICBiaW5kVG9XcmFwcGVyOiB0cnVlLAogICAgICAgIGZyZWVTY3JvbGw6IHRydWUsCiAgICAgICAgc2Nyb2xsWDogdHJ1ZSwKICAgICAgICBzY3JvbGxZOiB0cnVlLAogICAgICAgIHByb2JlVHlwZTogMywKICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgIGNsaWNrOiBmYWxzZSwKICAgICAgICBkYmxjbGljazogdHJ1ZSwKICAgICAgICBib3VuY2VUaW1lOiAzMDAsCiAgICAgICAgcHJldmVudERlZmF1bHQ6IHRoaXMucHJldmVudERlZmF1bHQKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGluaXRpYWxJbmRleChuZXdJbmRleCkgewogICAgICB0aGlzLnNldFBhZ2VJbmRleChuZXdJbmRleCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3coKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5fbGlzdGVuU2xpZGUoKQogICAgICAgIHRoaXMuX2xpc3RlblNjcm9sbCgpCiAgICAgIH0pCiAgICB9LAogICAgX2xpc3RlblNsaWRlKCkgewogICAgICAvLyB3YWl0aW5nIHNsaWRlIGluaXRpYWwKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGNvbnN0IHNsaWRlID0gdGhpcy4kcmVmcy5zbGlkZS5zbGlkZQogICAgICAgIHNsaWRlLm9uKCdzY3JvbGxTdGFydCcsIHRoaXMuc2xpZGVTY3JvbGxTdGFydEhhbmRsZXIpCiAgICAgICAgc2xpZGUub24oJ3Njcm9sbEVuZCcsIHRoaXMuc2xpZGVTY3JvbGxFbmRIYW5kbGVyKQogICAgICB9KQogICAgfSwKICAgIF9saXN0ZW5TY3JvbGwoKSB7CiAgICAgIC8vIHdhaXRpbmcgc2Nyb2xsIGluaXRpYWwKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuaXRlbXMuZm9yRWFjaCgoc2Nyb2xsSXRlbSkgPT4gewogICAgICAgICAgY29uc3Qgc2Nyb2xsID0gc2Nyb2xsSXRlbS5zY3JvbGwKICAgICAgICAgIHNjcm9sbC5vbignem9vbVN0YXJ0JywgdGhpcy56b29tU3RhcnRIYW5kbGVyLmJpbmQodGhpcywgc2Nyb2xsKSkKICAgICAgICAgIHNjcm9sbC5vbignYmVmb3JlU2Nyb2xsU3RhcnQnLCB0aGlzLmJlZm9yZVNjcm9sbEhhbmRsZXIpCiAgICAgICAgICBzY3JvbGwub24oJ3Njcm9sbCcsIHRoaXMuY2hlY2tCb3VuZGFyeS5iaW5kKHRoaXMsIHNjcm9sbCkpCiAgICAgICAgICBzY3JvbGwub24oJ3Njcm9sbEVuZCcsIHRoaXMuc2Nyb2xsRW5kSGFuZGxlci5iaW5kKHRoaXMsIHNjcm9sbCkpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBoaWRlKCkgewogICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuJGVtaXQoRVZFTlRfSElERSkKICAgIH0sCiAgICBwcmV2KCkgewogICAgICBjb25zdCBzbGlkZSA9IHRoaXMuJHJlZnMuc2xpZGUuc2xpZGUKICAgICAgc2xpZGUgJiYgc2xpZGUucHJldigpCiAgICB9LAogICAgbmV4dCgpIHsKICAgICAgY29uc3Qgc2xpZGUgPSB0aGlzLiRyZWZzLnNsaWRlLnNsaWRlCiAgICAgIHNsaWRlICYmIHNsaWRlLm5leHQoKQogICAgfSwKICAgIGdvVG8oaW5kZXgpIHsKICAgICAgY29uc3Qgc2xpZGUgPSB0aGlzLiRyZWZzLnNsaWRlLnNsaWRlCiAgICAgIHNsaWRlICYmIHNsaWRlLmdvVG9QYWdlKGluZGV4LCAwKQogICAgfSwKICAgIGltZ0xvYWQoaSkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlICYmIHRoaXMuJHJlZnMuaXRlbXMpIHsKICAgICAgICB0aGlzLiRyZWZzLml0ZW1zW2ldLnNjcm9sbC5yZWZyZXNoKCkKICAgICAgfQogICAgfSwKICAgIHNldFBhZ2VJbmRleChjdXJyZW50UGFnZUluZGV4KSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggPj0gMCAmJiB0aGlzLmN1cnJlbnRQYWdlSW5kZXggIT09IGN1cnJlbnRQYWdlSW5kZXgpIHsKICAgICAgICBjb25zdCBpdGVtID0gdGhpcy4kcmVmcy5pdGVtc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdCiAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgIGNvbnN0IHNjcm9sbCA9IGl0ZW0uc2Nyb2xsCiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICAgIGlmIChzY3JvbGwuc2NhbGUgIT09IDEpIHsKICAgICAgICAgICAgc2Nyb2xsLnNjYWxlID0gMQogICAgICAgICAgICBzY3JvbGwubGFzdGNhbGUgPSAxCiAgICAgICAgICAgIHNjcm9sbC5yZWZyZXNoKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW50UGFnZUluZGV4ID0gY3VycmVudFBhZ2VJbmRleAogICAgfSwKICAgIHNsaWRlQ2hhbmdlSGFuZGxlcihjdXJyZW50UGFnZUluZGV4KSB7CiAgICAgIHRoaXMuc2V0UGFnZUluZGV4KGN1cnJlbnRQYWdlSW5kZXgpCiAgICAgIHRoaXMuc2xpZGVTY3JvbGxFbmRIYW5kbGVyKCkKICAgICAgdGhpcy4kZW1pdChFVkVOVF9DSEFOR0UsIGN1cnJlbnRQYWdlSW5kZXgpCiAgICB9LAogICAgc2xpZGVTY3JvbGxTdGFydEhhbmRsZXIoKSB7CiAgICAgIGNvbnN0IHNsaWRlID0gdGhpcy4kcmVmcy5zbGlkZS5zbGlkZQogICAgICBpZiAodGhpcy5fc2Nyb2xsaW5nICYmICF0aGlzLl9oYXNFbmFibGVTbGlkZSkgewogICAgICAgIHNsaWRlLmRpc2FibGUoKQogICAgICB9IGVsc2UgewogICAgICAgIHNsaWRlLmVuYWJsZSgpCiAgICAgIH0KICAgIH0sCiAgICBzbGlkZVNjcm9sbEVuZEhhbmRsZXIoKSB7CiAgICAgIHRoaXMuJHJlZnMuaXRlbXMuZm9yRWFjaCgoc2Nyb2xsSXRlbSkgPT4gewogICAgICAgIHRoaXMuc2Nyb2xsRW5kSGFuZGxlcihzY3JvbGxJdGVtLnNjcm9sbCkKICAgICAgfSkKICAgIH0sCiAgICBfc2Nyb2xsKHNjcm9sbCkgewogICAgICBjb25zdCBzbGlkZSA9IHRoaXMuJHJlZnMuc2xpZGUuc2xpZGUKICAgICAgc2xpZGUuZGlzYWJsZSgpCiAgICAgIHNsaWRlLnJlZnJlc2goKQogICAgICBzY3JvbGwuZW5hYmxlKCkKICAgIH0sCiAgICBfc2xpZGUoc2Nyb2xsKSB7CiAgICAgIHRoaXMuJHJlZnMuc2xpZGUuc2xpZGUuZW5hYmxlKCkKICAgICAgc2Nyb2xsLmRpc2FibGUoKQogICAgfSwKICAgIGJlZm9yZVNjcm9sbEhhbmRsZXIoKSB7CiAgICAgIC8vIGZvciB0b3VjaHN0YXJ0IHNjcm9sbEVuZAogICAgICAvLyBjYW5jZWwgaXQsIGRvIG5vdCBlbmFibGUgc2xpZGUKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZW5hYmxlU2xpZGVUaWQpCiAgICB9LAogICAgc2Nyb2xsRW5kSGFuZGxlcihzY3JvbGwpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZW5hYmxlU2xpZGVUaWQpCiAgICAgIGlmICh0aGlzLmRibFpvb21pbmcpIHsKICAgICAgICB0aGlzLmRibFpvb21pbmcgPSBmYWxzZQogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGlkKQogICAgICB9CiAgICAgIHRoaXMuX2hhc0VuYWJsZVNsaWRlID0gZmFsc2UKICAgICAgdGhpcy5fc2Nyb2xsaW5nID0gZmFsc2UKICAgICAgc2Nyb2xsLmVuYWJsZSgpCiAgICAgIHRoaXMuZW5hYmxlU2xpZGVUaWQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnNsaWRlLnNsaWRlLmVuYWJsZSgpCiAgICAgIH0pCiAgICB9LAogICAgY2hlY2tCb3VuZGFyeShzY3JvbGwsIHBvcykgewogICAgICBpZiAoc2Nyb2xsLmRpc3RYICYmIE1hdGguYWJzKHNjcm9sbC5kaXN0WCkgPiBNYXRoLmFicyhzY3JvbGwuZGlzdFkpKSB7CiAgICAgICAgdGhpcy5fc2Nyb2xsaW5nID0gdHJ1ZQogICAgICAgIGNvbnN0IHJlYWNoZWQgPSBzY3JvbGwuZGlzdFggPiAwID8gcG9zLnggPj0gc2Nyb2xsLm1pblNjcm9sbFggOiBwb3MueCA8PSBzY3JvbGwubWF4U2Nyb2xsWAogICAgICAgIGlmIChyZWFjaGVkKSB7CiAgICAgICAgICB0aGlzLl9oYXNFbmFibGVTbGlkZSA9IHRydWUKICAgICAgICAgIHRoaXMuX3NsaWRlKHNjcm9sbCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCF0aGlzLl9oYXNFbmFibGVTbGlkZSkgewogICAgICAgICAgICB0aGlzLl9zY3JvbGwoc2Nyb2xsKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzY3JvbGwuZGlzdFkpIHsKICAgICAgICB0aGlzLl9zY3JvbGxpbmcgPSB0cnVlCiAgICAgICAgdGhpcy5fc2Nyb2xsKHNjcm9sbCkKICAgICAgfQogICAgfSwKICAgIHpvb21TdGFydEhhbmRsZXIoc2Nyb2xsKSB7CiAgICAgIHRoaXMuX3Njcm9sbChzY3JvbGwpCiAgICB9LAogICAgZGJsY2xpY2tIYW5kbGVyKGluZGV4LCBlKSB7CiAgICAgIGNvbnN0IHNjcm9sbCA9IHRoaXMuJHJlZnMuaXRlbXNbaW5kZXhdLnNjcm9sbAogICAgICB0aGlzLmRibFpvb21pbmcgPSB0cnVlCiAgICAgIHRoaXMuem9vbVRvKHNjcm9sbCwgc2Nyb2xsLnNjYWxlID4gMSA/IDEgOiAyLCBlKQogICAgICBzY3JvbGwuZGlzYWJsZSgpCiAgICB9LAogICAgaXRlbUNsaWNrSGFuZGxlcigpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaWQpCiAgICAgIHRoaXMuY2xpY2tUaWQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAhdGhpcy5kYmxab29taW5nICYmIHRoaXMuaGlkZSgpCiAgICAgIH0sIHRoaXMuc2Nyb2xsT3B0aW9ucy5ib3VuY2VUaW1lKQogICAgfSwKICAgIHpvb21UbyhzY3JvbGwsIHNjYWxlLCBlKSB7CiAgICAgIHNjcm9sbC56b29tVG8oc2NhbGUsIGUucGFnZVgsIGUucGFnZVkpCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDdWJlUG9wdXAsCiAgICBDdWJlU2xpZGUsCiAgICBDdWJlU2xpZGVJdGVtLAogICAgQ3ViZVNjcm9sbAogIH0KfQo="},{"version":3,"sources":["image-preview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"image-preview.vue","sourceRoot":"node_modules/cube-ui/src/components/image-preview","sourcesContent":["<template>\n  <transition name=\"cube-image-preview-fade\">\n    <cube-popup type=\"image-preview\" :z-index=\"zIndex\" :center=\"false\" v-show=\"isVisible\">\n      <div class=\"cube-image-preview-container\">\n        <div class=\"cube-image-preview-header\">\n          <slot name=\"header\" :current=\"currentPageIndex\"></slot>\n        </div>\n        <cube-slide\n          ref=\"slide\"\n          v-if=\"isVisible\"\n          :data=\"imgs\"\n          :initial-index=\"currentPageIndex\"\n          :auto-play=\"false\"\n          :loop=\"loop\"\n          :speed=\"speed\"\n          :options=\"options\"\n          @change=\"slideChangeHandler\"\n        >\n          <cube-slide-item\n            v-for=\"(img, index) in imgs\"\n            :key=\"index\"\n          >\n            <div class=\"cube-image-preview-item\" @click=\"itemClickHandler\">\n              <cube-scroll\n                ref=\"items\"\n                :options=\"scrollOptions\"\n                @dblclick.native=\"dblclickHandler(index, $event)\"\n              >\n                <img class=\"cube-image-preview-img\" :src=\"img\" @load=\"imgLoad(index)\">\n              </cube-scroll>\n            </div>\n          </cube-slide-item>\n          <template slot=\"dots\"><i></i></template>\n        </cube-slide>\n        <div class=\"cube-image-preview-footer\">\n          <slot name=\"footer\" :current=\"currentPageIndex\">\n            <span class=\"cube-image-preview-counter\">{{currentPageIndex + 1}}/{{imgs.length}}</span>\n          </slot>\n        </div>\n      </div>\n    </cube-popup>\n  </transition>\n</template>\n<script type=\"text/ecmascript-6\">\n  import CubePopup from '../popup/popup.vue'\n  import CubeSlide from '../slide/slide.vue'\n  import CubeSlideItem from '../slide/slide-item.vue'\n  import CubeScroll from '../scroll/scroll.vue'\n  import visibilityMixin from '../../common/mixins/visibility'\n  import popupMixin from '../../common/mixins/popup'\n  import { isAndroid } from '../../common/helpers/env'\n\n  const COMPONENT_NAME = 'cube-image-preview'\n  const EVENT_CHANGE = 'change'\n  const EVENT_HIDE = 'hide'\n\n  export default {\n    name: COMPONENT_NAME,\n    mixins: [visibilityMixin, popupMixin],\n    props: {\n      initialIndex: {\n        type: Number,\n        default: 0\n      },\n      imgs: {\n        type: Array,\n        default() {\n          /* istanbul ignore next */\n          return []\n        }\n      },\n      loop: {\n        type: Boolean,\n        default: true\n      },\n      speed: {\n        type: Number,\n        default: 400\n      },\n      preventDefault: {\n        type: Boolean,\n        default: true\n      }\n    },\n    data() {\n      return {\n        currentPageIndex: this.initialIndex,\n        options: {\n          observeDOM: false,\n          bounce: {\n            left: true,\n            right: true\n          },\n          useTransition: !isAndroid,\n          probeType: 3,\n          preventDefault: this.preventDefault\n        },\n        scrollOptions: {\n          HWCompositing: isAndroid,\n          observeDOM: false,\n          zoom: true,\n          bindToWrapper: true,\n          freeScroll: true,\n          scrollX: true,\n          scrollY: true,\n          probeType: 3,\n          bounce: false,\n          click: false,\n          dblclick: true,\n          bounceTime: 300,\n          preventDefault: this.preventDefault\n        }\n      }\n    },\n    watch: {\n      initialIndex(newIndex) {\n        this.setPageIndex(newIndex)\n      }\n    },\n    methods: {\n      show() {\n        this.isVisible = true\n        this.$nextTick(() => {\n          this._listenSlide()\n          this._listenScroll()\n        })\n      },\n      _listenSlide() {\n        // waiting slide initial\n        this.$nextTick(() => {\n          const slide = this.$refs.slide.slide\n          slide.on('scrollStart', this.slideScrollStartHandler)\n          slide.on('scrollEnd', this.slideScrollEndHandler)\n        })\n      },\n      _listenScroll() {\n        // waiting scroll initial\n        this.$nextTick(() => {\n          this.$refs.items.forEach((scrollItem) => {\n            const scroll = scrollItem.scroll\n            scroll.on('zoomStart', this.zoomStartHandler.bind(this, scroll))\n            scroll.on('beforeScrollStart', this.beforeScrollHandler)\n            scroll.on('scroll', this.checkBoundary.bind(this, scroll))\n            scroll.on('scrollEnd', this.scrollEndHandler.bind(this, scroll))\n          })\n        })\n      },\n      hide() {\n        this.isVisible = false\n        this.$emit(EVENT_HIDE)\n      },\n      prev() {\n        const slide = this.$refs.slide.slide\n        slide && slide.prev()\n      },\n      next() {\n        const slide = this.$refs.slide.slide\n        slide && slide.next()\n      },\n      goTo(index) {\n        const slide = this.$refs.slide.slide\n        slide && slide.goToPage(index, 0)\n      },\n      imgLoad(i) {\n        /* istanbul ignore if */\n        if (this.isVisible && this.$refs.items) {\n          this.$refs.items[i].scroll.refresh()\n        }\n      },\n      setPageIndex(currentPageIndex) {\n        if (this.currentPageIndex >= 0 && this.currentPageIndex !== currentPageIndex) {\n          const item = this.$refs.items[this.currentPageIndex]\n          if (item) {\n            const scroll = item.scroll\n            /* istanbul ignore if */\n            if (scroll.scale !== 1) {\n              scroll.scale = 1\n              scroll.lastcale = 1\n              scroll.refresh()\n            }\n          }\n        }\n        this.currentPageIndex = currentPageIndex\n      },\n      slideChangeHandler(currentPageIndex) {\n        this.setPageIndex(currentPageIndex)\n        this.slideScrollEndHandler()\n        this.$emit(EVENT_CHANGE, currentPageIndex)\n      },\n      slideScrollStartHandler() {\n        const slide = this.$refs.slide.slide\n        if (this._scrolling && !this._hasEnableSlide) {\n          slide.disable()\n        } else {\n          slide.enable()\n        }\n      },\n      slideScrollEndHandler() {\n        this.$refs.items.forEach((scrollItem) => {\n          this.scrollEndHandler(scrollItem.scroll)\n        })\n      },\n      _scroll(scroll) {\n        const slide = this.$refs.slide.slide\n        slide.disable()\n        slide.refresh()\n        scroll.enable()\n      },\n      _slide(scroll) {\n        this.$refs.slide.slide.enable()\n        scroll.disable()\n      },\n      beforeScrollHandler() {\n        // for touchstart scrollEnd\n        // cancel it, do not enable slide\n        clearTimeout(this.enableSlideTid)\n      },\n      scrollEndHandler(scroll) {\n        clearTimeout(this.enableSlideTid)\n        if (this.dblZooming) {\n          this.dblZooming = false\n          clearTimeout(this.clickTid)\n        }\n        this._hasEnableSlide = false\n        this._scrolling = false\n        scroll.enable()\n        this.enableSlideTid = setTimeout(() => {\n          this.$refs.slide.slide.enable()\n        })\n      },\n      checkBoundary(scroll, pos) {\n        if (scroll.distX && Math.abs(scroll.distX) > Math.abs(scroll.distY)) {\n          this._scrolling = true\n          const reached = scroll.distX > 0 ? pos.x >= scroll.minScrollX : pos.x <= scroll.maxScrollX\n          if (reached) {\n            this._hasEnableSlide = true\n            this._slide(scroll)\n          } else {\n            if (!this._hasEnableSlide) {\n              this._scroll(scroll)\n            }\n          }\n        } else if (scroll.distY) {\n          this._scrolling = true\n          this._scroll(scroll)\n        }\n      },\n      zoomStartHandler(scroll) {\n        this._scroll(scroll)\n      },\n      dblclickHandler(index, e) {\n        const scroll = this.$refs.items[index].scroll\n        this.dblZooming = true\n        this.zoomTo(scroll, scroll.scale > 1 ? 1 : 2, e)\n        scroll.disable()\n      },\n      itemClickHandler() {\n        clearTimeout(this.clickTid)\n        this.clickTid = setTimeout(() => {\n          !this.dblZooming && this.hide()\n        }, this.scrollOptions.bounceTime)\n      },\n      zoomTo(scroll, scale, e) {\n        scroll.zoomTo(scale, e.pageX, e.pageY)\n      }\n    },\n    components: {\n      CubePopup,\n      CubeSlide,\n      CubeSlideItem,\n      CubeScroll\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n\n  .cube-image-preview-fade-enter, .cube-image-preview-fade-leave-active\n    opacity: 0\n  .cube-image-preview-fade-enter-active, .cube-image-preview-fade-leave-active\n    transition: all .3s ease-in-out\n\n  .cube-image-preview\n    .cube-popup-mask\n      opacity: .6\n    .cube-popup-content\n      width: 100%\n      height: 100%\n    .cube-slide-item\n      display: flex\n      align-items: center\n      justify-content: center\n      overflow: hidden\n  .cube-image-preview-container\n    height: 100%\n    margin: 0 -10px\n  .cube-image-preview-header,\n  .cube-image-preview-footer\n    position: absolute\n    left: 0\n    right: 0\n  .cube-image-preview-header\n    top: 0\n  .cube-image-preview-footer\n    bottom: 0\n  .cube-image-preview-counter\n    position: absolute\n    bottom: 50px\n    width: 100%\n    text-align: center\n    font-size: $fontsize-medium\n    color: $image-preview-counter-color\n  .cube-image-preview-item\n    position: relative\n    padding: 0 10px\n    width: 100%\n    height: 100%\n    .cube-scroll-wrapper\n      display: flex\n      align-items: center\n      justify-content: center\n    .cube-image-preview-img\n      display: block\n      height: auto\n      max-width: 100%\n      max-height: 100%\n</style>\n"]}]}